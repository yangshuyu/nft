# 后端
### 手动添加图层文件（把原始图层文件添加到项目中）
	cp -r '你的图层文件' nft/file/layers
	添加完成后目录结构为：
	nft/file/layers/background  nft/file/layers/body  ..... 

### 创建 venv 虚拟环境：

    python3 -m venv venv 

### 进入虚拟环境工作：

    source venv/bin/active


### 安装依赖包
    
    pip install -r requirements.txt

### 启动服务
	python manager.py runserver -h 0.0.0.0 -p 5002

### 测试
	curl http://localhost:5002/api/v1/layers
	
### 添加nginx图片地址引用
	server {
    listen 8081;
    #server_name ec.cbg.megvii-inc.com;
    charset utf-8;
    client_body_buffer_size  256K;
    client_body_timeout  60s;
    client_max_body_size 1000M;

    location /files {
        #return 200;
        #image_filter_buffer  10M;
        #image_filter_jpeg_quality 75;
        #expires 1d;
        add_header 'Access-Control-Allow-Origin' '*';
        add_header 'Access-Control-Allow-Credentials' 'true';
        alias /home/yangshuyu/nft/nft/file;
   }
   
   #代理前端项目
    location / {
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
        add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';
        if ($request_method = 'OPTIONS') {
        return 204;
    }
    #此项为前端打包路径
    root /xxxxxxxx/dist/;
    index index.html;
    try_files $uri $uri/ /index.html;
    error_page 404 /index.html;
    }
}

### 备注（生成文件位置）
	生成图片位置
	nft/file/images
	生成json位置
	nft/file/json
	生成缩略图位置
	nft/file/mini_json
	
	
	
# 前端
### 克隆项目
	1、git clone https://gitee.com/h1111/ntf-create-front.git

### 本地运行：修改请求api
	2、修改项目根路径 .env.development 文件， 将VUE_APP_API_BASE_URL改为本地URL

### 安装依赖并运行
	3、npm install && npm run serve

### 打包发布
	5、npm run build 
    将打包后的路径 更新至nginx 配置文件，代理出去。
	备注: 打包发布，需将项目根目录 .env 文件中的VUE_APP_API_BASE_URL改为线上URL

